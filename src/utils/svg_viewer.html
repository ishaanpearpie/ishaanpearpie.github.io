<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG File Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }

        .svg-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px 0;
        }

        .svg-item {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .svg-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .svg-container {
            width: 100%;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            border: 1px solid #eee;
            border-radius: 4px;
            background: #fafafa;
            overflow: hidden;
        }

        .svg-container svg {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .svg-filename {
            font-weight: bold;
            color: #333;
            margin-top: 10px;
            word-break: break-all;
        }

        .svg-dimensions {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .copy-buttons {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-top: 10px;
        }

        .copy-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            transition: background 0.2s;
        }

        .copy-btn:hover {
            background: #219a52;
        }

        .copy-btn.copied {
            background: #e67e22;
        }

        .copy-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }

        .error {
            color: #e74c3c;
            text-align: center;
            padding: 20px;
            background: #ffeaea;
            border: 1px solid #e74c3c;
            border-radius: 4px;
            margin: 20px 0;
        }

        .file-input {
            margin-bottom: 20px;
            text-align: center;
        }

        .file-input input[type="file"] {
            display: none;
        }

        .file-input label {
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .file-input label:hover {
            background: #2980b9;
        }

        .stats {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SVG File Viewer</h1>
        
        <div class="file-input">
            <label for="svg-files">Select SVG Files</label>
            <input type="file" id="svg-files" multiple accept=".svg,image/svg+xml">
        </div>

        <div class="stats" id="stats"></div>
        
        <div class="loading" id="loading">
            Select SVG files using the button above to view them here.
        </div>
        
        <div class="svg-grid" id="svg-grid"></div>
    </div>

    <script>
        class SVGViewer {
            constructor() {
                this.svgGrid = document.getElementById('svg-grid');
                this.loading = document.getElementById('loading');
                this.stats = document.getElementById('stats');
                this.fileInput = document.getElementById('svg-files');
                
                this.setupEventListeners();
            }

            setupEventListeners() {
                this.fileInput.addEventListener('change', (e) => {
                    this.handleFileSelection(e.target.files);
                });

                // Handle drag and drop
                document.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    document.body.style.backgroundColor = '#e3f2fd';
                });

                document.addEventListener('dragleave', (e) => {
                    e.preventDefault();
                    document.body.style.backgroundColor = '#f5f5f5';
                });

                document.addEventListener('drop', (e) => {
                    e.preventDefault();
                    document.body.style.backgroundColor = '#f5f5f5';
                    
                    const files = Array.from(e.dataTransfer.files).filter(
                        file => file.type === 'image/svg+xml' || file.name.toLowerCase().endsWith('.svg')
                    );
                    
                    if (files.length > 0) {
                        this.handleFileSelection(files);
                    }
                });
            }

            handleFileSelection(files) {
                const svgFiles = Array.from(files).filter(
                    file => file.type === 'image/svg+xml' || file.name.toLowerCase().endsWith('.svg')
                );

                if (svgFiles.length === 0) {
                    this.showError('No SVG files selected. Please select files with .svg extension.');
                    return;
                }

                this.loading.style.display = 'none';
                this.stats.textContent = `Found ${svgFiles.length} SVG file${svgFiles.length !== 1 ? 's' : ''}`;
                this.renderSVGFiles(svgFiles);
            }

            showError(message) {
                this.svgGrid.innerHTML = `<div class="error">${message}</div>`;
                this.loading.style.display = 'none';
            }

            async renderSVGFiles(files) {
                this.svgGrid.innerHTML = '';

                for (const file of files) {
                    try {
                        await this.renderSVGFile(file);
                    } catch (error) {
                        console.error(`Error rendering ${file.name}:`, error);
                        this.addErrorItem(file.name, error.message);
                    }
                }
            }

            async renderSVGFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    
                    reader.onload = (e) => {
                        try {
                            const svgContent = e.target.result;
                            const svgItem = this.createSVGItem(file.name, svgContent);
                            this.svgGrid.appendChild(svgItem);
                            resolve();
                        } catch (error) {
                            reject(error);
                        }
                    };

                    reader.onerror = () => reject(new Error('Failed to read file'));
                    reader.readAsText(file);
                });
            }

            createSVGItem(filename, svgContent) {
                const item = document.createElement('div');
                item.className = 'svg-item';

                const container = document.createElement('div');
                container.className = 'svg-container';

                // Parse SVG to get dimensions
                const parser = new DOMParser();
                const svgDoc = parser.parseFromString(svgContent, 'image/svg+xml');
                const svgElement = svgDoc.querySelector('svg');

                let dimensions = 'Unknown dimensions';
                if (svgElement) {
                    const width = svgElement.getAttribute('width') || svgElement.getAttribute('viewBox')?.split(' ')[2] || 'auto';
                    const height = svgElement.getAttribute('height') || svgElement.getAttribute('viewBox')?.split(' ')[3] || 'auto';
                    dimensions = `${width} Ã— ${height}`;
                }

                // Create SVG element
                container.innerHTML = svgContent;

                const filenameDiv = document.createElement('div');
                filenameDiv.className = 'svg-filename';
                filenameDiv.textContent = filename;

                const dimensionsDiv = document.createElement('div');
                dimensionsDiv.className = 'svg-dimensions';
                dimensionsDiv.textContent = dimensions;

                // Add copy buttons
                const copyButtonsDiv = document.createElement('div');
                copyButtonsDiv.className = 'copy-buttons';

                // Copy SVG Code button
                const copyCodeBtn = document.createElement('button');
                copyCodeBtn.className = 'copy-btn';
                copyCodeBtn.textContent = 'Copy SVG Code';
                copyCodeBtn.onclick = () => this.copySVGCode(svgContent, copyCodeBtn);

                // Copy as Image button
                const copyImageBtn = document.createElement('button');
                copyImageBtn.className = 'copy-btn';
                copyImageBtn.textContent = 'Copy as Image';
                copyImageBtn.onclick = () => this.copySVGAsImage(svgContent, copyImageBtn);

                // Copy Data URL button
                const copyDataUrlBtn = document.createElement('button');
                copyDataUrlBtn.className = 'copy-btn';
                copyDataUrlBtn.textContent = 'Copy Data URL';
                copyDataUrlBtn.onclick = () => this.copySVGAsDataURL(svgContent, copyDataUrlBtn);

                copyButtonsDiv.appendChild(copyCodeBtn);
                copyButtonsDiv.appendChild(copyImageBtn);
                copyButtonsDiv.appendChild(copyDataUrlBtn);

                item.appendChild(container);
                item.appendChild(filenameDiv);
                item.appendChild(dimensionsDiv);
                item.appendChild(copyButtonsDiv);

                return item;
            }

            addErrorItem(filename, errorMessage) {
                const item = document.createElement('div');
                item.className = 'svg-item';
                
                const container = document.createElement('div');
                container.className = 'svg-container';
                container.innerHTML = `<div style="color: #e74c3c;">Error loading SVG</div>`;

                const filenameDiv = document.createElement('div');
                filenameDiv.className = 'svg-filename';
                filenameDiv.textContent = filename;

                const errorDiv = document.createElement('div');
                errorDiv.className = 'svg-dimensions';
                errorDiv.style.color = '#e74c3c';
                errorDiv.textContent = `Error: ${errorMessage}`;

                item.appendChild(container);
                item.appendChild(filenameDiv);
                item.appendChild(errorDiv);

                this.svgGrid.appendChild(item);
            }

            // Copy functions
            async copySVGCode(svgContent, button) {
                try {
await navigator.clipboard.writeText(svgContent);
                    this.showCopySuccess(button, 'Copied!');
                } catch (err) {
                    console.error('Failed to copy SVG code:', err);
                    this.showCopyError(button, 'Failed');
                }
            }

            async copySVGAsDataURL(svgContent, button) {
                try {
                    const dataUrl = `data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(svgContent)))}`;
                    await navigator.clipboard.writeText(dataUrl);
                    this.showCopySuccess(button, 'Copied!');
                } catch (err) {
                    console.error('Failed to copy data URL:', err);
                    this.showCopyError(button, 'Failed');
                }
            }

            async copySVGAsImage(svgContent, button) {
                try {
                    // Create a canvas to convert SVG to image
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    const img = new Image();

                    const dataUrl = `data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(svgContent)))}`;
                    
                    img.onload = async () => {
                        canvas.width = img.width || 300;
                        canvas.height = img.height || 300;
                        ctx.drawImage(img, 0, 0);
                        
                        try {
                            // Convert canvas to blob and copy to clipboard
                            canvas.toBlob(async (blob) => {
                                if (blob && navigator.clipboard && navigator.clipboard.write) {
                                    const item = new ClipboardItem({ 'image/png': blob });
                                    await navigator.clipboard.write([item]);
                                    this.showCopySuccess(button, 'Copied!');
                                } else {
                                    throw new Error('Clipboard API not supported');
                                }
                            }, 'image/png');
                        } catch (err) {
                            console.error('Failed to copy as image:', err);
                            this.showCopyError(button, 'Not supported');
                        }
                    };

                    img.onerror = () => {
                        console.error('Failed to load SVG as image');
                        this.showCopyError(button, 'Failed');
                    };

                    img.src = dataUrl;
                } catch (err) {
                    console.error('Failed to copy as image:', err);
                    this.showCopyError(button, 'Failed');
                }
            }

            showCopySuccess(button, message) {
                const originalText = button.textContent;
                button.textContent = message;
                button.classList.add('copied');
                button.disabled = true;
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                    button.disabled = false;
                }, 2000);
            }

            showCopyError(button, message) {
                const originalText = button.textContent;
                button.textContent = message;
                button.style.background = '#e74c3c';
                button.disabled = true;
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.disabled = false;
                }, 2000);
            }
        }

        // Initialize the SVG viewer when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new SVGViewer();
        });

        // Add some helpful instructions
        console.log('SVG Viewer loaded!');
        console.log('Instructions:');
        console.log('1. Click "Select SVG Files" to choose SVG files from your computer');
        console.log('2. Or drag and drop SVG files directly onto the page');
        console.log('3. SVG files will be displayed with their filenames and dimensions');
    </script>
</body>
</html>

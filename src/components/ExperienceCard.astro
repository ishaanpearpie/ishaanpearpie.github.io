---
interface Props {
  title: string;
  company: string;
  location: string;
  type: string;
  startDate: string;
  endDate?: string | null;
  current: boolean;
  responsibilities: string[];
  technologies: string[];
  achievements: string[];
}

const { title, company, location, type, startDate, endDate, current, responsibilities, technologies, achievements } = Astro.props;

function formatDate(dateString: string): string {
  return new Date(dateString).toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
}
---

<article class="glow-border rounded-xl p-8 bg-[var(--bg-elevated)] relative">
  <!-- Timeline indicator -->
  <div class="absolute -left-3 top-8 w-6 h-6 rounded-full bg-cyber-blue border-4 border-[var(--bg-secondary)] hidden md:block"></div>
  
  <div class="flex flex-wrap items-start justify-between mb-4">
    <div>
      <h3 class="text-2xl font-bold text-cyber-cyan mb-1">{title}</h3>
      <p class="text-xl text-[var(--text-primary)] font-semibold">{company}</p>
      <p class="text-sm text-[var(--text-tertiary)]">{location} • {type}</p>
    </div>
    <div class="text-right">
      <p class="text-sm font-mono text-[var(--text-secondary)]">
        {formatDate(startDate)} - {current ? 'Present' : endDate ? formatDate(endDate) : 'Present'}
      </p>
      {current && (
        <span class="inline-block mt-2 px-3 py-1 text-xs font-semibold bg-neon-green/20 text-neon-green border border-neon-green/50 rounded-full">
          Current
        </span>
      )}
    </div>
  </div>

  <ul class="space-y-3 mb-6">
    {responsibilities.map((resp) => (
      <li class="flex items-start gap-3 text-[var(--text-secondary)]">
        <span class="text-terminal-green mt-1 flex-shrink-0">▹</span>
        <span>{resp}</span>
      </li>
    ))}
  </ul>

  <div class="flex flex-wrap gap-2 mb-4">
    {technologies.map((tech) => (
      <span class="px-3 py-1 text-xs font-mono bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-[var(--text-tertiary)]">
        {tech}
      </span>
    ))}
  </div>

  <div class="flex flex-wrap gap-4 pt-4 border-t border-[var(--border-color)]">
    {achievements.map((achievement) => (
      <div class="flex items-center gap-2">
        <span class="text-neon-green text-xl">⚡</span>
        <span class="text-sm font-semibold text-[var(--text-primary)]">{achievement}</span>
      </div>
    ))}
  </div>
</article>
